(window["webpackJsonpmy-app"]=window["webpackJsonpmy-app"]||[]).push([[0],{28:function(e,a,t){},43:function(e,a,t){e.exports=t(61)},48:function(e,a,t){},49:function(e,a,t){},61:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),s=t(15),r=t.n(s);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(48);var c=t(16),i=t(10),o=t(17),m=t(18),u=t(19),d=t(14),h=(t(49),function(e){function a(){return Object(c.a)(this,a),Object(o.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement("p",null,"Please Select a Game"),l.a.createElement(d.b,{className:"btn btn-default",to:"/game-xoxo-main"},"XOXO Game")))}}]),a}(n.Component)),p=t(6),v=t(84),f=t(21),y=t.n(f),g=t(39),E=t(80),b=t(81),N=t(83),k=t(82),x=t(79),w=t(33),C=t(40),O=t.n(C);t(28);function j(){var e=Object(g.a)(["\n    display: block;\n    margin: 0 auto;\n"]);return j=function(){return e},e}var S={firstRow:[0,1,2],secondRow:[3,4,5],thirdRow:[6,7,8],firstColumn:[0,3,6],secondColumn:[1,4,7],thirdColumn:[2,5,8],firstDiameter:[0,4,8],secondDiameter:[2,4,6]},G=Object(w.css)(j());function D(e,a,t){return{first:{key:"xoxo-cell"+e,value:""},second:{key:"xoxo-cell"+a,value:""},third:{key:"xoxo-cell"+t,value:""}}}function R(e){return"1"===e.decision?"Waiting for opponent response":T()}function T(){return l.a.createElement("a",{href:"/game-xoxo-main",className:"btn btn-default"},"Exit")}var _=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).playerNumber=null,t.playerName=null,t.state={data:e.data,turn:"-"===e.data.second_player?"X":"O",pending:2!==e.data.players_number,myTurn:!1,gameEnded:"1"===e.data.game_finished,waitingMsg:"Waiting for opponent",decisionNum:"0",otherPlayerRefused:!1},t.state.cellData=t.resetData(),t.cellClicked=t.cellClicked.bind(Object(p.a)(t)),t.checkClass=t.checkClass.bind(Object(p.a)(t)),t.rematchDecisionClicked=t.updateRematchDecision.bind(Object(p.a)(t)),t.mainUrl="http://"+window.location.hostname+":3000",e.data.result?t.playerNumber||(t.playerNumber=2,t.playerName=e.data.second_player):(t.updateResult(!0),t.playerNumber=1,t.playerName=e.data.first_player),t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"updateRematchDecision",value:function(e){1===this.playerNumber?this.updateResult(null,e):this.updateResult(null,null,e),this.setState({decisionNum:e})}},{key:"updateResult",value:function(e,a,t){var n={result:this.state.cellData,id:this.state.data.id,gameNumber:this.state.data.game_number,nextTurn:"X"!==this.state.turn||e?"X":"O",gameEnded:this.state.gameEnded};a&&(n.rematchOne=a),t&&(n.rematchTwo=t),fetch(this.mainUrl+"/xoxo-games/update-game",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){})}},{key:"resetData",value:function(){return[D("1","2","3"),D("4","5","6"),D("7","8","9")]}},{key:"cellClicked",value:function(e){e.preventDefault();var a=this;if(this.state.myTurn&&!this.state.gameEnded){var t=e.currentTarget.id,n=this.state.cellData,l=!1;y.a.find(n,function(e){if(e.first.key===t)l=a.setCellValue(e.first);else if(e.second.key===t)l=a.setCellValue(e.second);else{if(e.third.key!==t)return!1;l=a.setCellValue(e.third)}}),l&&this.updateResult()}}},{key:"refreshData",value:function(){var e=this;fetch(this.mainUrl+"/xoxo-games/get-game",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.state.data)}).then(function(e){return e.json()}).then(function(a){e.state.pending&&2===a.players_number&&(e.setState({pending:!1}),e.state.data.second_player=a.second_player),e.setState({myTurn:e.state.turn===a.player_turn}),a.result&&(e.setState({cellData:JSON.parse(a.result),gameEnded:1===a.game_finished}),e.checkWinner()),e.rematch(a)})}},{key:"rematch",value:function(e){1===e.rematch_player1&&1===e.rematch_player2?(this.setState({gameEnded:!1,cellData:this.resetData(),decisionNum:"0"}),this.updateResult(null,"0","0")):(1===this.playerNumber&&2===e.rematch_player2||2===this.playerNumber&&2===e.rematch_player1)&&this.setState({otherPlayerRefused:!0}),this.state.gameEnded||this.setState({decisionNum:"0",otherPlayerRefused:!1})}},{key:"checkWinner",value:function(){var e=this,a=this.state.cellData;if(!(y.a.isEmpty(a)||this.state.pending||this.state.gameEnded)){var t=[],n=0;y.a.each(a,function(e){""!==e.first.value&&(n+=1),""!==e.second.value&&(n+=1),""!==e.third.value&&(n+=1),t.push(e.first.value),t.push(e.second.value),t.push(e.third.value)});var l=!1,s=y.a.keys(S);y.a.each(s,function(a){if(e.checkValues(t,S[a]))return e.colorizeWinningCells(S[a]),l=!0,!1}),9===n&&(l=!0),this.setState({gameEnded:l})}}},{key:"colorizeWinningCells",value:function(e){y.a.each(e,function(e){var a=e+1;document.getElementById("xoxo-cell"+a).classList.add("winning-cell")})}},{key:"checkValues",value:function(e,a){return""!==e[a[0]]&&e[a[0]]===e[a[1]]&&e[a[0]]===e[a[2]]}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval(function(){return e.refreshData()},150),this.state.pending&&(this.intervalMsg=setInterval(function(){return e.updatingWaitingMsg()},150))}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval),clearInterval(this.intervalMsg)}},{key:"setCellValue",value:function(e){return!e.value&&(e.value=this.state.turn,!0)}},{key:"checkClass",value:function(e){return e?"add-class":""}},{key:"updatingWaitingMsg",value:function(){y.a.endsWith(this.state.waitingMsg," . . . .")?this.setState({waitingMsg:"Waiting for opponent"}):this.setState({waitingMsg:this.state.waitingMsg+" ."})}},{key:"render",value:function(){var e=this,a=this.state.pending?{}:{display:"none"},t=this.state.pending?{display:"none"}:{display:"inline-block",width:"100%",maxWidth:"400px"},n=this.state.gameEnded?{}:{display:"none"},s=this.state.otherPlayerRefused?{}:{display:"none"},r="0"!==this.state.decisionNum?{}:{display:"none"},c="0"!==this.state.decisionNum||this.state.otherPlayerRefused?{display:"none"}:{};return l.a.createElement("div",{className:"xoxo-game"},l.a.createElement("header",{className:"xoxo-game-header"},l.a.createElement("div",{className:"row form-group",style:{width:"100%"}},l.a.createElement("div",{className:"col-12 col-sm-3 col-xs-3"},l.a.createElement("h5",null,"Player #1"),l.a.createElement("h5",{style:{color:"#33b76e"}},this.state.data.first_player)),l.a.createElement("div",{className:"col-12 col-sm-6 col-xs-6 form-group"},l.a.createElement("h5",null,"Game #"),l.a.createElement("h5",{style:{color:"#33b76e"}},this.state.data.game_number)),l.a.createElement("div",{className:"col-12 col-sm-3 col-xs-3"},l.a.createElement("h5",null,"Player #2"),l.a.createElement("h5",{style:{color:"#33b76e"}},this.state.data.second_player))),l.a.createElement("div",{className:"row",style:{width:"100%"}},l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("div",{className:"sweet-loading"},l.a.createElement(O.a,{css:G,sizeUnit:"px",size:30,margin:"2px",color:"#33b76e",loading:this.state.pending}),l.a.createElement("div",{style:a},l.a.createElement("h4",{style:{marginTop:"20px",color:"#33b76e"}},this.state.waitingMsg))),l.a.createElement("div",{className:"col-sm-3 col-xs-0"}),l.a.createElement("div",{className:"col-sm-6 col-xs-12 no-padding"},l.a.createElement(x.a,{style:t},l.a.createElement(E.a,null,l.a.createElement(b.a,{style:{width:"100%",overflowX:"auto"}},this.state.cellData.map(function(a){return l.a.createElement(k.a,null,l.a.createElement(N.a,{id:a.first.key,key:a.first.key,align:"center",onClick:e.cellClicked,className:""!==a.first.value?"value-added":""},a.first.value),l.a.createElement(N.a,{id:a.second.key,key:a.second.key,align:"center",onClick:e.cellClicked,className:""!==a.second.value?"value-added":""},a.second.value),l.a.createElement(N.a,{id:a.third.key,key:a.third.key,align:"center",onClick:e.cellClicked,className:""!==a.third.value?"value-added":""},a.third.value))}))))),l.a.createElement("div",{className:"col-sm-3 col-xs-0"}))),l.a.createElement("div",{className:"game-is-over",style:n},l.a.createElement("div",{style:s},l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("p",null,"The other player doesn't want to rematch."),l.a.createElement(T,null))),l.a.createElement("div",{style:r},l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement(R,{decision:this.state.decisionNum}))),l.a.createElement("div",{style:c},l.a.createElement("div",{className:"row",style:{marginTop:"10px"}},l.a.createElement("div",{className:"col-12 col-sm-12"},"Wanna rematch?")),l.a.createElement("div",{className:"row",style:{marginTop:"20px"}},l.a.createElement("div",{className:"col-6 col-xs-6"},l.a.createElement("input",{type:"button",value:"Yes",className:"btn btn-green",onClick:function(){return e.updateRematchDecision("1")}})),l.a.createElement("div",{className:"col-6 col-xs-6"},l.a.createElement("input",{type:"button",value:"No",className:"btn btn-red",onClick:function(){return e.updateRematchDecision("2")}})))))))}}]),a}(n.Component);function W(e){return l.a.createElement("div",{className:"form-group"},l.a.createElement("button",{id:"submit-btn",type:"submit",className:"btn btn-default"},e.notRandom?"Login":"Search"))}var P=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).state={reason:null,randomGame:!0},t.mainUrl="http://"+window.location.hostname+":3000",t.loginToGame=t.loginToGame.bind(Object(p.a)(t)),t.handleSwitchChange=t.handleSwitchChange.bind(Object(p.a)(t)),t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"loginToGame",value:function(e){e.preventDefault();var a=this;this.setState({reason:null}),this.state.randomGame&&(this.refs.number.value=null,this.refs.pass.value=null);var t={playerName:this.refs.name.value,gameNumber:this.refs.number.value,gamePass:this.refs.pass.value};fetch(this.mainUrl+"/xoxo-games/game-login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){console.log(e),y.a.get(e,"failure")?a.setState({reason:e.reason}):r.a.render(l.a.createElement(_,{data:e.obj}),document.getElementById("root"))})}},{key:"handleSwitchChange",value:function(){this.setState({randomGame:!this.state.randomGame})}},{key:"render",value:function(){var e=this,a=this.state.randomGame?{display:"none"}:{},t=this.state.randomGame?{}:{display:"none"},n=!this.state.randomGame;return l.a.createElement("div",{className:"xoxo-game"},l.a.createElement("header",{className:"xoxo-game-header row"},l.a.createElement(d.b,{to:"/game-xoxo-main",className:"btn btn-default back-btn"},"Back"),l.a.createElement("div",{className:"col-12 col-sm-4"}),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("form",{onSubmit:this.loginToGame},l.a.createElement("span",{style:{display:"block",color:"red"}},this.state.reason),l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{required:!0,ref:"name",type:"text",className:"form-control",placeholder:"Your Name"})),l.a.createElement("label",null,"Random Game?"),l.a.createElement(v.a,{checked:this.state.randomGame,onChange:function(){return e.handleSwitchChange("randomGame")},value:"checkedB",color:"primary",inputProps:{"aria-label":"primary checkbox"}})),l.a.createElement("div",{style:a},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{required:n,ref:"number",type:"text",className:"form-control",placeholder:"Game Number"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{required:n,ref:"pass",type:"password",className:"form-control",placeholder:"Game Password"}))),l.a.createElement(W,{notRandom:!this.state.randomGame,randomStyle:t}))),l.a.createElement("div",{className:"col-12 col-sm-4"})))}}]),a}(n.Component),M=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).state={},t.mainUrl="http://"+window.location.hostname+":3000",t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"xoxo-game"},l.a.createElement("header",{className:"xoxo-game-header row"},l.a.createElement("div",{className:"col-12 col-sm-4"}),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("form",null,l.a.createElement("div",{className:"form-group login-form"},l.a.createElement(d.b,{to:"/game-xoxo-create",className:"btn btn-default"},"Create Game"),l.a.createElement(d.b,{to:"/game-xoxo-login",className:"btn btn-default"},"Enter a Game")))),l.a.createElement("div",{className:"col-12 col-sm-4"})))}}]),a}(n.Component),U=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(o.a)(this,Object(m.a)(a).call(this,e))).state={privateSwitch:!1},t.mainUrl="http://"+window.location.hostname+":3000",t.handleSwitchChange=t.handleSwitchChange.bind(Object(p.a)(t)),t.createGame=t.createGame.bind(Object(p.a)(t)),t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"handleSwitchChange",value:function(){this.setState({privateSwitch:!this.state.privateSwitch})}},{key:"createGame",value:function(e){e.preventDefault();var a={pass:this.refs.pass.value,name:this.refs.name.value};this.refs.pass.value="",this.refs.name.value="",fetch(this.mainUrl+"/xoxo-games/create-game",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){r.a.render(l.a.createElement(_,{data:e}),document.getElementById("root"))})}},{key:"render",value:function(){var e=this,a=this.state.privateSwitch?{}:{display:"none"};return l.a.createElement("div",{className:"xoxo-game"},l.a.createElement("header",{className:"xoxo-game-header row"},l.a.createElement(d.b,{to:"/game-xoxo-main",className:"btn btn-default back-btn"},"Back"),l.a.createElement("div",{className:"col-12 col-sm-4"}),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("form",{onSubmit:this.createGame},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 form-group"},l.a.createElement("input",{required:!0,type:"text",className:"form-control",placeholder:"Your Name",name:"name",ref:"name"})),l.a.createElement("div",{className:"col-12 form-group"},l.a.createElement("label",null,"Private?"),l.a.createElement(v.a,{checked:this.state.privateSwitch,onChange:function(){return e.handleSwitchChange("privateSwitch")},value:"checkedB",color:"primary",inputProps:{"aria-label":"primary checkbox"}})),l.a.createElement("div",{style:a},l.a.createElement("div",{className:"col-12 form-group"},l.a.createElement("input",{required:this.state.privateSwitch,type:"password",className:"form-control",placeholder:"Password",name:"pass",ref:"pass"}))),l.a.createElement("div",{className:"col-12 form-group"},l.a.createElement("button",{type:"submit",className:"btn btn-default"},"Create"))))),l.a.createElement("div",{className:"col-12 col-sm-4"})))}}]),a}(n.Component),B=(t(58),t(59),t(60),t(24)),I=l.a.createElement(d.a,null,l.a.createElement("div",null,l.a.createElement(B.a,{exact:!0,path:"/",component:h}),l.a.createElement(B.a,{path:"/game-xoxo-login",component:P}),l.a.createElement(B.a,{path:"/game-xoxo-main",component:M}),l.a.createElement(B.a,{path:"/game-xoxo-create",component:U})));r.a.render(I,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[43,1,2]]]);
//# sourceMappingURL=main.c8fb0f4b.chunk.js.map