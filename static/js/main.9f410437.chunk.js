(window["webpackJsonpmy-app"]=window["webpackJsonpmy-app"]||[]).push([[0],{28:function(e,t,a){},29:function(e,t,a){var n=a(59);e.exports={getMainUrl:function(){var e=n.apiHost;return n.apiPort&&(e="".concat(n.apiHost,":").concat(n.apiPort)),console.log("test",e),e}}},44:function(e,t,a){e.exports=a(63)},49:function(e,t,a){},50:function(e,t,a){},59:function(e,t,a){e.exports={apiHost:Object({NODE_ENV:"production",PUBLIC_URL:"/games",REACT_APP_API_PORT:"3000"}).REACT_APP_API_HOST||"http://".concat(window.location.hostname),apiPort:"3000"}},63:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(15),s=a.n(r),c=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function i(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(49);var o=a(16),m=a(10),u=a(17),d=a(18),h=a(19),p=a(14),f=(a(50),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement("p",null,"Please Select a Game"),l.a.createElement(p.b,{className:"btn btn-default",to:"/game-xoxo-main"},"XOXO Game")))}}]),t}(n.Component)),v=a(6),g=a(86),y=a(21),b=a.n(y),E=a(40),N=a(82),k=a(83),x=a(85),w=a(84),C=a(81),O=a(34),j=a(41),S=a.n(j);a(28);function R(){var e=Object(E.a)(["\n    display: block;\n    margin: 0 auto;\n"]);return R=function(){return e},e}var P=a(29),G={firstRow:[0,1,2],secondRow:[3,4,5],thirdRow:[6,7,8],firstColumn:[0,3,6],secondColumn:[1,4,7],thirdColumn:[2,5,8],firstDiameter:[0,4,8],secondDiameter:[2,4,6]},_=Object(O.css)(R());function D(e,t,a){return{first:{key:"xoxo-cell"+e,value:""},second:{key:"xoxo-cell"+t,value:""},third:{key:"xoxo-cell"+a,value:""}}}function T(e){return"1"===e.decision?"Waiting for opponent response":U()}function U(){return l.a.createElement("a",{href:"/game-xoxo-main",className:"btn btn-default"},"Exit")}var W=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).playerNumber=null,a.playerName=null,a.state={data:e.data,turn:"-"===e.data.second_player?"X":"O",pending:2!==e.data.players_number,myTurn:!1,gameEnded:"1"===e.data.game_finished,waitingMsg:"Waiting for opponent",decisionNum:"0",otherPlayerRefused:!1},a.state.cellData=a.resetData(),a.cellClicked=a.cellClicked.bind(Object(v.a)(a)),a.checkClass=a.checkClass.bind(Object(v.a)(a)),a.rematchDecisionClicked=a.updateRematchDecision.bind(Object(v.a)(a)),a.mainUrl=P.getMainUrl(),e.data.result?a.playerNumber||(a.playerNumber=2,a.playerName=e.data.second_player):(a.updateResult(!0),a.playerNumber=1,a.playerName=e.data.first_player),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"updateRematchDecision",value:function(e){1===this.playerNumber?this.updateResult(null,e):this.updateResult(null,null,e),this.setState({decisionNum:e})}},{key:"updateResult",value:function(e,t,a){var n={result:this.state.cellData,id:this.state.data.id,gameNumber:this.state.data.game_number,nextTurn:"X"!==this.state.turn||e?"X":"O",gameEnded:this.state.gameEnded};t&&(n.rematchOne=t),a&&(n.rematchTwo=a),fetch(this.mainUrl+"/xoxo-games/update-game",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){})}},{key:"resetData",value:function(){return[D("1","2","3"),D("4","5","6"),D("7","8","9")]}},{key:"cellClicked",value:function(e){e.preventDefault();var t=this;if(this.state.myTurn&&!this.state.gameEnded){var a=e.currentTarget.id,n=this.state.cellData,l=!1;b.a.find(n,function(e){if(e.first.key===a)l=t.setCellValue(e.first);else if(e.second.key===a)l=t.setCellValue(e.second);else{if(e.third.key!==a)return!1;l=t.setCellValue(e.third)}}),l&&this.updateResult()}}},{key:"refreshData",value:function(){var e=this;fetch(this.mainUrl+"/xoxo-games/get-game",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.state.data)}).then(function(e){return e.json()}).then(function(t){e.state.pending&&2===t.players_number&&(e.setState({pending:!1}),e.state.data.second_player=t.second_player),e.setState({myTurn:e.state.turn===t.player_turn}),t.result&&(e.setState({cellData:JSON.parse(t.result),gameEnded:1===t.game_finished}),e.checkWinner()),e.rematch(t)})}},{key:"rematch",value:function(e){1===e.rematch_player1&&1===e.rematch_player2?(this.setState({gameEnded:!1,cellData:this.resetData(),decisionNum:"0"}),this.updateResult(null,"0","0")):(1===this.playerNumber&&2===e.rematch_player2||2===this.playerNumber&&2===e.rematch_player1)&&this.setState({otherPlayerRefused:!0}),this.state.gameEnded||this.setState({decisionNum:"0",otherPlayerRefused:!1})}},{key:"checkWinner",value:function(){var e=this,t=this.state.cellData;if(!(b.a.isEmpty(t)||this.state.pending||this.state.gameEnded)){var a=[],n=0;b.a.each(t,function(e){""!==e.first.value&&(n+=1),""!==e.second.value&&(n+=1),""!==e.third.value&&(n+=1),a.push(e.first.value),a.push(e.second.value),a.push(e.third.value)});var l=!1,r=b.a.keys(G);b.a.each(r,function(t){if(e.checkValues(a,G[t]))return e.colorizeWinningCells(G[t]),l=!0,!1}),9===n&&(l=!0),this.setState({gameEnded:l})}}},{key:"colorizeWinningCells",value:function(e){b.a.each(e,function(e){var t=e+1;document.getElementById("xoxo-cell"+t).classList.add("winning-cell")})}},{key:"checkValues",value:function(e,t){return""!==e[t[0]]&&e[t[0]]===e[t[1]]&&e[t[0]]===e[t[2]]}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval(function(){return e.refreshData()},150),this.state.pending&&(this.intervalMsg=setInterval(function(){return e.updatingWaitingMsg()},150))}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval),clearInterval(this.intervalMsg)}},{key:"setCellValue",value:function(e){return!e.value&&(e.value=this.state.turn,!0)}},{key:"checkClass",value:function(e){return e?"add-class":""}},{key:"updatingWaitingMsg",value:function(){b.a.endsWith(this.state.waitingMsg," . . . .")?this.setState({waitingMsg:"Waiting for opponent"}):this.setState({waitingMsg:this.state.waitingMsg+" ."})}},{key:"render",value:function(){var e=this,t=this.state.pending?{}:{display:"none"},a=this.state.pending?{display:"none"}:{display:"inline-block",width:"100%",maxWidth:"400px"},n=this.state.gameEnded?{}:{display:"none"},r=this.state.otherPlayerRefused?{}:{display:"none"},s="0"!==this.state.decisionNum?{}:{display:"none"},c="0"!==this.state.decisionNum||this.state.otherPlayerRefused?{display:"none"}:{};return l.a.createElement("div",{className:"xoxo-game"},l.a.createElement("header",{className:"xoxo-game-header"},l.a.createElement("div",{className:"row form-group",style:{width:"100%"}},l.a.createElement("div",{className:"col-12 col-sm-3 col-xs-3"},l.a.createElement("h5",null,"Player #1"),l.a.createElement("h5",{style:{color:"#33b76e"}},this.state.data.first_player)),l.a.createElement("div",{className:"col-12 col-sm-6 col-xs-6 form-group"},l.a.createElement("h5",null,"Game #"),l.a.createElement("h5",{style:{color:"#33b76e"}},this.state.data.game_number)),l.a.createElement("div",{className:"col-12 col-sm-3 col-xs-3"},l.a.createElement("h5",null,"Player #2"),l.a.createElement("h5",{style:{color:"#33b76e"}},this.state.data.second_player))),l.a.createElement("div",{className:"row",style:{width:"100%"}},l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("div",{className:"sweet-loading"},l.a.createElement(S.a,{css:_,sizeUnit:"px",size:30,margin:"2px",color:"#33b76e",loading:this.state.pending}),l.a.createElement("div",{style:t},l.a.createElement("h4",{style:{marginTop:"20px",color:"#33b76e"}},this.state.waitingMsg))),l.a.createElement("div",{className:"col-sm-3 col-xs-0"}),l.a.createElement("div",{className:"col-sm-6 col-xs-12 no-padding"},l.a.createElement(C.a,{style:a},l.a.createElement(N.a,null,l.a.createElement(k.a,{style:{width:"100%",overflowX:"auto"}},this.state.cellData.map(function(t){return l.a.createElement(w.a,null,l.a.createElement(x.a,{id:t.first.key,key:t.first.key,align:"center",onClick:e.cellClicked,className:""!==t.first.value?"value-added":""},t.first.value),l.a.createElement(x.a,{id:t.second.key,key:t.second.key,align:"center",onClick:e.cellClicked,className:""!==t.second.value?"value-added":""},t.second.value),l.a.createElement(x.a,{id:t.third.key,key:t.third.key,align:"center",onClick:e.cellClicked,className:""!==t.third.value?"value-added":""},t.third.value))}))))),l.a.createElement("div",{className:"col-sm-3 col-xs-0"}))),l.a.createElement("div",{className:"game-is-over",style:n},l.a.createElement("div",{style:r},l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("p",null,"The other player doesn't want to rematch."),l.a.createElement(U,null))),l.a.createElement("div",{style:s},l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement(T,{decision:this.state.decisionNum}))),l.a.createElement("div",{style:c},l.a.createElement("div",{className:"row",style:{marginTop:"10px"}},l.a.createElement("div",{className:"col-12 col-sm-12"},"Wanna rematch?")),l.a.createElement("div",{className:"row",style:{marginTop:"20px"}},l.a.createElement("div",{className:"col-6 col-xs-6"},l.a.createElement("input",{type:"button",value:"Yes",className:"btn btn-green",onClick:function(){return e.updateRematchDecision("1")}})),l.a.createElement("div",{className:"col-6 col-xs-6"},l.a.createElement("input",{type:"button",value:"No",className:"btn btn-red",onClick:function(){return e.updateRematchDecision("2")}})))))))}}]),t}(n.Component),M=a(29);function A(e){return l.a.createElement("div",{className:"form-group"},l.a.createElement("button",{id:"submit-btn",type:"submit",className:"btn btn-default"},e.notRandom?"Login":"Search"))}var I=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={reason:null,randomGame:!0},a.mainUrl=M.getMainUrl(),a.loginToGame=a.loginToGame.bind(Object(v.a)(a)),a.handleSwitchChange=a.handleSwitchChange.bind(Object(v.a)(a)),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"loginToGame",value:function(e){e.preventDefault();var t=this;this.setState({reason:null}),this.state.randomGame&&(this.refs.number.value=null,this.refs.pass.value=null);var a={playerName:this.refs.name.value,gameNumber:this.refs.number.value,gamePass:this.refs.pass.value};fetch(this.mainUrl+"/xoxo-games/game-login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){console.log(e),b.a.get(e,"failure")?t.setState({reason:e.reason}):s.a.render(l.a.createElement(W,{data:e.obj}),document.getElementById("root"))})}},{key:"handleSwitchChange",value:function(){this.setState({randomGame:!this.state.randomGame})}},{key:"render",value:function(){var e=this,t=this.state.randomGame?{display:"none"}:{},a=this.state.randomGame?{}:{display:"none"},n=!this.state.randomGame;return l.a.createElement("div",{className:"xoxo-game"},l.a.createElement("header",{className:"xoxo-game-header row"},l.a.createElement(p.b,{to:"/game-xoxo-main",className:"btn btn-default back-btn"},"Back"),l.a.createElement("div",{className:"col-12 col-sm-4"}),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("form",{onSubmit:this.loginToGame},l.a.createElement("span",{style:{display:"block",color:"red"}},this.state.reason),l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{required:!0,ref:"name",type:"text",className:"form-control",placeholder:"Your Name"})),l.a.createElement("label",null,"Random Game?"),l.a.createElement(g.a,{checked:this.state.randomGame,onChange:function(){return e.handleSwitchChange("randomGame")},value:"checkedB",color:"primary",inputProps:{"aria-label":"primary checkbox"}})),l.a.createElement("div",{style:t},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{required:n,ref:"number",type:"text",className:"form-control",placeholder:"Game Number"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{required:n,ref:"pass",type:"password",className:"form-control",placeholder:"Game Password"}))),l.a.createElement(A,{notRandom:!this.state.randomGame,randomStyle:a}))),l.a.createElement("div",{className:"col-12 col-sm-4"})))}}]),t}(n.Component),B=a(29),J=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},a.mainUrl=B.getMainUrl(),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"xoxo-game"},l.a.createElement("header",{className:"xoxo-game-header row"},l.a.createElement("div",{className:"col-12 col-sm-4"}),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("form",null,l.a.createElement("div",{className:"form-group login-form"},l.a.createElement(p.b,{to:"/game-xoxo-create",className:"btn btn-default"},"Create Game"),l.a.createElement(p.b,{to:"/game-xoxo-login",className:"btn btn-default"},"Enter a Game")))),l.a.createElement("div",{className:"col-12 col-sm-4"})))}}]),t}(n.Component),V=a(29),L=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={privateSwitch:!1},a.mainUrl=V.getMainUrl(),a.handleSwitchChange=a.handleSwitchChange.bind(Object(v.a)(a)),a.createGame=a.createGame.bind(Object(v.a)(a)),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"handleSwitchChange",value:function(){this.setState({privateSwitch:!this.state.privateSwitch})}},{key:"createGame",value:function(e){e.preventDefault();var t={pass:this.refs.pass.value,name:this.refs.name.value};this.refs.pass.value="",this.refs.name.value="",fetch(this.mainUrl+"/xoxo-games/create-game",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){s.a.render(l.a.createElement(W,{data:e}),document.getElementById("root"))})}},{key:"render",value:function(){var e=this,t=this.state.privateSwitch?{}:{display:"none"};return l.a.createElement("div",{className:"xoxo-game"},l.a.createElement("header",{className:"xoxo-game-header row"},l.a.createElement(p.b,{to:"/game-xoxo-main",className:"btn btn-default back-btn"},"Back"),l.a.createElement("div",{className:"col-12 col-sm-4"}),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("form",{onSubmit:this.createGame},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 form-group"},l.a.createElement("input",{required:!0,type:"text",className:"form-control",placeholder:"Your Name",name:"name",ref:"name"})),l.a.createElement("div",{className:"col-12 form-group"},l.a.createElement("label",null,"Private?"),l.a.createElement(g.a,{checked:this.state.privateSwitch,onChange:function(){return e.handleSwitchChange("privateSwitch")},value:"checkedB",color:"primary",inputProps:{"aria-label":"primary checkbox"}})),l.a.createElement("div",{style:t},l.a.createElement("div",{className:"col-12 form-group"},l.a.createElement("input",{required:this.state.privateSwitch,type:"password",className:"form-control",placeholder:"Password",name:"pass",ref:"pass"}))),l.a.createElement("div",{className:"col-12 form-group"},l.a.createElement("button",{type:"submit",className:"btn btn-default"},"Create"))))),l.a.createElement("div",{className:"col-12 col-sm-4"})))}}]),t}(n.Component),X=(a(60),a(61),a(62),a(24)),q=l.a.createElement(p.a,{basename:"/"},l.a.createElement("div",null,l.a.createElement(X.a,{exact:!0,path:"/",component:f}),l.a.createElement(X.a,{path:"/game-xoxo-login",component:I}),l.a.createElement(X.a,{path:"/game-xoxo-main",component:J}),l.a.createElement(X.a,{path:"/game-xoxo-create",component:L})));s.a.render(q,document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/games",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/games","/service-worker.js");c?(!function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):i(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):i(t,e)})}}()}},[[44,1,2]]]);
//# sourceMappingURL=main.9f410437.chunk.js.map